{const e=()=>{let e=$("#post-form");e.submit((s=>{s.preventDefault(),$.ajax({type:"post",url:"/posts/save-post",dataType:"json",data:e.serialize(),success:e=>{new Noty({type:"success",theme:"relax",text:e.message,timeout:1500,layout:"topRight"}).show();let s=t(e.post);$("#posts-list-container > ul").prepend(s),new ToggleLike($(" .toggle-like-button",s));let r=$(" .delete-post-button",s);o(r);let l=$(" .comment-form",s);n(l,e.post._id)},error:e=>{new Noty({type:"error",theme:"relax",text:"Error in saving post",timeout:1500,layout:"topRight"}).show(),console.error(e)}})}))},t=e=>$(`<li id="post-${e._id}">\n        <div>\n            ${e.content}\n            ${e.user.name}\n            <a class="toggle-like-button" data-likes="0" href="/likes/toggle?id=${e._id}&type=Post">\n                0 likes\n            </a>\n            <button>\n                <a class="delete-post-button" href="posts/destroy/${e._id}">Delete Post</a>\n            </button> \n        </div>\n        <div>\n            <form action="comments/save-comment/${e._id}" class="comment-form" method="post">\n                <textarea \n                        name="content" \n                        cols="20" \n                        rows="2" \n                        placeholder="Comment here..."></textarea>\n                <br>\n                <input type="submit" value="Comment">\n            </form> \n            <div id="${e._id}-comments-list-container">\n                <ul></ul>\n            </div>\n        </div>\n    </li>`),o=e=>{e.on("click",(t=>{t.preventDefault(),$.ajax({type:"get",url:e.attr("href"),success:e=>{new Noty({type:"success",theme:"relax",text:e.message,timeout:1500,layout:"topRight"}).show(),$(`#post-${e.postId}`).remove()},error:e=>{new Noty({type:"error",theme:"relax",text:"Error in deleting post",timeout:1500,layout:"topRight"}).show(),console.error(e)}})}))},n=(e,t)=>{e.submit((o=>{o.preventDefault(),$.ajax({type:"post",url:`comments/save-comment/${t}`,dataType:"json",data:e.serialize(),success:e=>{new Noty({type:"success",theme:"relax",text:e.message,timeout:1500,layout:"topRight"}).show();let o=s(e.comment);$(`#${t}-comments-list-container > ul`).prepend(o),new ToggleLike($(" .toggle-like-button",o));let n=$(" .delete-comment-button",o);r(n)},error:e=>{new Noty({type:"error",theme:"relax",text:"Error in saving comment",timeout:1500,layout:"topRight"}).show(),console.error(e)}})}))},s=e=>$(`<li id="comment-${e._id}">\n                    ${e.content}\n                    =\n                    ${e.user.name}\n                    <a class="toggle-like-button" data-likes="0" href="/likes/toggle?id=${e._id}&type=Comment">\n                        0 likes\n                    </a>\n                    <button>\n                        <a class="delete-comment-button" href="comments/destroy/${e._id}">Delete Comment</a>\n                    </button> \n                </li>`),r=e=>{e.on("click",(t=>{t.preventDefault(),$.ajax({type:"get",url:e.attr("href"),success:e=>{new Noty({type:"success",theme:"relax",text:e.message,timeout:1500,layout:"topRight"}).show(),$(`#comment-${e.commentId}`).remove()},error:e=>{new Noty({type:"error",theme:"relax",text:"Error in deleting post",timeout:1500,layout:"topRight"}).show(),console.error(e)}})}))};let l=$("#posts-list-container > ul > li");for(let e of l){let t=e.attributes.id.nodeValue.split("-")[1],n=$(` #${t}-comments-list-container > ul > li`,e);for(let e of n){let t=$(" .delete-comment-button",e);r(t)}let s=$(" .delete-post-button",e);o(s)}e()}